웹사이트를 복제하는 방법은 복제하려는 \*\*웹사이트의 성격(정적/동적)\*\*과 \*\*복제의 목적(백업, 마이그레이션, 오프라인 조회)\*\*에 따라 사용되는 도구와 절차가 크게 달라집니다.

목적별 가장 효율적인 사이트 복제 방법을 안내해 드립니다.

-----

## 1\. 정적(Static) 웹사이트 복제: `wget`을 이용한 아카이빙

웹사이트가 HTML, CSS, JavaScript, 이미지 파일 등으로만 구성된 **정적 사이트**이거나, 단순히 **특정 웹 페이지의 콘텐츠 전체**를 오프라인에서 보존하고 싶을 때 가장 유용한 리눅스 명령어입니다.

| 도구 | 특징 | 용도 |
| :--- | :--- | :--- |
| **`wget`** | 리눅스/유닉스 계열에서 사용되는 강력한 웹 콘텐츠 다운로드 도구. | 웹사이트 전체 구조 복사, 아카이빙, 오프라인 조회. |

### 🔍 `wget` 명령어 예제 (전체 복제)

`wget`을 재귀적(Recursive)으로 사용하여 모든 페이지, 이미지, CSS 등을 다운로드하고 로컬 링크로 변환합니다.

```bash
wget --recursive \
     --no-parent \
     --convert-links \
     --page-requisites \
     --restrict-file-names=windows \
     --domains <복제할 도메인> \
     --wait=1 \
     <URL>
```

| 옵션 | 설명 (실전 팁) |
| :--- | :--- |
| `--recursive` | **재귀적으로** 모든 하위 링크를 따라가며 다운로드합니다. |
| `--convert-links` | 다운로드된 파일 내부의 링크를 \*\*상대 경로(로컬 파일 경로)\*\*로 변환하여 오프라인에서도 브라우징 가능하게 합니다. |
| `--page-requisites` | HTML 페이지를 표시하는 데 필요한 모든 파일(이미지, CSS, JS)을 다운로드합니다. |
| `--wait=1` | 서버에 부담을 주지 않도록 요청 사이에 **1초 대기 시간**을 둡니다. (`robots.txt`를 존중하는 것이 좋습니다.) |

-----

## 2\. 동적(Dynamic) 웹사이트 복제: 코드, DB, 환경 설정 마이그레이션

WordPress, Django, Spring Boot 등 \*\*데이터베이스(DB)\*\*를 사용하는 동적 웹 서비스를 복제할 때는 단순히 파일을 복사하는 것 이상이 필요합니다.

**사이트 복제 과정은 근본적으로 마이그레이션 프로세스와 동일하며, 다음과 같은 3요소를 반드시 복사해야 합니다.**

### A. 📂 코드 및 파일 복사

1.  **코드 복사:** Git을 사용하거나 SFTP/SCP를 이용하여 웹 서버의 모든 애플리케이션 파일(PHP, Python 스크립트, 이미지 업로드 폴더 등)을 새 인스턴스로 전송합니다.
2.  **퍼미션 설정:** 리눅스에서 복사 후, 웹 서버(예: `www-data` 사용자)가 파일에 접근할 수 있도록 **파일 권한**을 올바르게 설정합니다.

### B. 🗄️ 데이터베이스 복제 (가장 중요)

DB가 없으면 웹사이트는 작동하지 않습니다.

1.  **원본 DB 내보내기 (Export):**
      * MySQL/MariaDB의 경우: `mysqldump -u [유저명] -p [DB명] > backup.sql`
      * PostgreSQL의 경우: `pg_dump -U [유저명] [DB명] > backup.sql`
2.  **대상 DB 가져오기 (Import):**
      * 새로운 인스턴스에 DB 서버를 설치하고 빈 데이터베이스를 생성합니다.
      * `mysql -u [유저명] -p [DB명] < backup.sql` 명령어로 데이터를 가져옵니다.

### C. ⚙️ 환경 설정 조정 (실수 방지 팁)

데이터를 복사한 후 반드시 다음 설정을 새 환경에 맞게 조정해야 합니다.

1.  **DB 연결 정보 수정:**
      * 애플리케이션 설정 파일(예: `wp-config.php`, `settings.py`)에서 데이터베이스 **호스트 이름**, **유저명**, **비밀번호**를 새 인스턴스의 DB 정보로 변경합니다.
2.  **URL 업데이트 (필수):**
      * DB에 저장된 **절대 경로 URL** (예: `http://old-domain.com`)을 새 도메인(예: `http://new-stage-site.com`)으로 변경합니다.
      * **워드프레스**의 경우, DB의 `wp_options` 테이블에서 `siteurl` 및 `home` 값을 변경하고, `Search & Replace` 도구를 사용하여 DB 전체의 절대 경로를 일괄적으로 수정합니다.

-----

## 3\. 전체 인스턴스 복제 (VM 레벨)

웹사이트뿐만 아니라 **운영체제(OS), 설치된 모든 소프트웨어, 환경 설정까지** 동일하게 복제하는 방법입니다.

| 도구 | 특징 |
| :--- | :--- |
| **클라우드 이미지** | **AWS AMI**, **Azure Image**, **GCP Custom Image** 등을 생성하여, 운영 중인 인스턴스의 스냅샷을 기반으로 똑같은 새 인스턴스를 빠르게 생성합니다. |
| **가상화 도구** | VMware, VirtualBox 등에서 **VM 복제** 기능을 사용하여 전체 가상 머신 디스크를 복사합니다. |

이 방법은 환경 설정 오류를 최소화하고 가장 빠르고 확실하게 복제할 수 있는 **실무적 접근법**입니다. 특히 스테이징 환경 구축 시 유용합니다.
